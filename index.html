<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Pulseo — PWA (hotfix)</title>
  <meta name="robots" content="noindex,nofollow">
  <link rel="manifest" href="manifest.webmanifest">
  <meta name="theme-color" content="#5b6bff">
  <link rel="icon" href="icon-192.png">
  <link rel="stylesheet" href="styles.css">
  <style>.hidden{display:none}</style>
  <script defer src="i18n.js"></script>
  <script defer src="db.js"></script>
  <script defer src="app.js"></script>
</head>
<body>
  <main id="main">
    <!-- Vue accueil -->
    <section class="splash" data-view="splash">
      <h1 data-i18n="title">Ton coach au rythme de ta vitalité</h1>
      <p class="tagline" data-i18n="subtitle">PWA complète, offline & mémoire locale.</p>
      <button id="start" data-i18n="start">Commencer</button>
    </section>

    <!-- Vue consentement -->
    <section class="consent panel hidden" data-view="consent">
      <h2 data-i18n="privacy_title">Confidentialité & Options</h2>
      <p class="muted" data-i18n="privacy_desc">Tout est local-first. Active seulement ce que tu souhaites.</p>
      <button id="continue" data-i18n="continue">Continuer</button>
    </section>

    <!-- Vue chat -->
    <section class="chat hidden panel" data-view="chat">
      <header class="chat-header">
        <h2 data-i18n="chat_title">Discussion</h2>
      </header>

      <div class="messages" id="messages" role="log" aria-live="polite"></div>

      <!-- ✅ Pas de <form> => aucun submit possible -->
      <div id="composer" class="composer" role="form" aria-label="Composer un message">
        <label for="input" class="sr-only" data-i18n="msg_label">Message</label>
        <input id="input" placeholder="Écrire un message…" autocomplete="off" />
        <button id="send" type="button" aria-label="Envoyer" data-i18n="send">Envoyer</button>
      </div>
    </section>
  </main>
</body>
</html>